-- Enable RLS on classes table\nALTER TABLE public.classes ENABLE ROW LEVEL SECURITY;\n\n-- Allow admins to manage all classes\nCREATE POLICY "Admins can manage classes" ON public.classes\n  FOR ALL TO authenticated\n  USING (\n    EXISTS (\n      SELECT 1 FROM public.profiles p\n      WHERE p.id = auth.uid() AND p.role = 'admin'\n    )\n  )\n  WITH CHECK (\n    EXISTS (\n      SELECT 1 FROM public.profiles p\n      WHERE p.id = auth.uid() AND p.role = 'admin'\n    )\n  );\n\n-- Allow authenticated users to view classes\nCREATE POLICY "Authenticated users can view classes" ON public.classes\n  FOR SELECT TO authenticated\n  USING (true);
