-- Enable RLS on class_teachers table\nALTER TABLE public.class_teachers ENABLE ROW LEVEL SECURITY;\n\n-- Allow admins to manage all class_teachers relationships\nCREATE POLICY "Admins can manage class teacher relationships" ON public.class_teachers\n  FOR ALL TO authenticated\n  USING (\n    EXISTS (\n      SELECT 1 FROM public.profiles p\n      WHERE p.id = auth.uid() AND p.role = 'admin'\n    )\n  )\n  WITH CHECK (\n    EXISTS (\n      SELECT 1 FROM public.profiles p\n      WHERE p.id = auth.uid() AND p.role = 'admin'\n    )\n  );\n\n-- Allow authenticated users to view class teacher relationships\nCREATE POLICY "Authenticated users can view class teacher relationships" ON public.class_teachers\n  FOR SELECT TO authenticated\n  USING (true);
